<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Top</title>

<meta name="description" content="Top">
<meta name="keywords" content="Top">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="#Top" rel="start" title="Top">
<link href="#Variable-Index" rel="index" title="Variable Index">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">





















<span id="Top"></span><div class="header">
<p>
Next: <a href="#Introduction" accesskey="n" rel="next">Introduction</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Top-1"></span><h1 class="top">Top</h1>
<span id="index-djula"></span>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Introduction" accesskey="1">Introduction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Basics" accesskey="2">Basics</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Usage" accesskey="3">Usage</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Variables" accesskey="4">Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Tags" accesskey="5">Tags</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Comments" accesskey="6">Comments</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Verbatim" accesskey="7">Verbatim</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Filters" accesskey="8">Filters</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Template-inheritance" accesskey="9">Template inheritance</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Internationalization">Internationalization</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Error-handling">Error handling</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Automatic-HTML-escaping">Automatic HTML escaping</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Custom-tag-and-filter-libraries">Custom tag and filter libraries</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Variable-Index" rel="index">Variable Index</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Function-Index" rel="index">Function Index</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Concept-Index" rel="index">Concept Index</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Introduction"></span><div class="header">
<p>
Next: <a href="#Basics" accesskey="n" rel="next">Basics</a>, Previous: <a href="#Top" accesskey="p" rel="prev">Top</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Introduction-1"></span><h2 class="chapter">1 Introduction</h2>
<span id="g_t_0023introduction"></span>
<span id="index-foo"></span>

<span id="index-alexandria_003aflatten"></span>
<span id="alexandria_003aflatten-function"></span><dl>
<dt id="index-flatten">alexandria: <strong>flatten</strong> <em>(x y z)</em></dt>
<dd><p>This is alexandria flatten function
</p></dd></dl>

<p>Djula is an HTML templating system similar to Django templates for
Common Lisp.
</p>
<p>Like the function &lsquo;flatten&rsquo;.
</p>
<p>Djula&rsquo;s template language is designed to strike a balance between power
and ease. It&rsquo;s designed to feel comfortable to those used to working
with HTML.
</p>
<p>Philosophy
</p>
<p>If you have a background in programming, or if you&rsquo;re used to languages
which mix programming code directly into HTML, you&rsquo;ll want to bear in
mind that the Djula template system is not simply Common Lisp code
embedded into HTML. This is by design: the template system is meant to
express presentation, not program logic.
</p>
<p>The Djula template system provides tags which function similarly to some
programming constructs &ndash; an <code>if</code> tag for boolean tests, a
<code>for</code> tag for looping, etc. &ndash; but these are not simply executed as
the corresponding Lisp code, and the template system will not execute
arbitrary Lisp expressions. Only the tags, filters and syntax listed
below are supported by default (although you can add
<code>your own extensions
&lt;/howto/custom-template-tags&gt;</code> to the template language as needed).
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Prerequisites" accesskey="1">Prerequisites</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Installation" accesskey="2">Installation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Prerequisites"></span><div class="header">
<p>
Next: <a href="#Installation" accesskey="n" rel="next">Installation</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Prerequisites-1"></span><h3 class="section">1.1 Prerequisites</h3>
<span id="g_t_0023prerequisites"></span><p>TODO: list of Common Lisp compilers Djula works on.
</p>
<hr>
<span id="Installation"></span><div class="header">
<p>
Previous: <a href="#Prerequisites" accesskey="p" rel="prev">Prerequisites</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Installation-1"></span><h3 class="section">1.2 Installation</h3>
<span id="g_t_0023installation"></span><p>Djula is available on Quicklisp:
</p>
<pre class="verbatim">(ql:quickload :djula)
</pre>


<hr>
<span id="Basics"></span><div class="header">
<p>
Next: <a href="#Usage" accesskey="n" rel="next">Usage</a>, Previous: <a href="#Introduction" accesskey="p" rel="prev">Introduction</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Basics-1"></span><h2 class="chapter">2 Basics</h2>
<span id="g_t_0023basics"></span>
<span id="index-foo-1"></span>

<p>A template is simply a text file. It can generate any text-based format
(HTML, XML, CSV, etc.).
</p>
<p>A template contains <strong>variables</strong>, which get replaced with values
when the template is evaluated, and <strong>tags</strong>, which control the
logic of the template.
</p>
<p>Below is a minimal template that illustrates a few basics. Each element
will be explained later in this document.
</p>
<pre class="verbatim">{% extends &quot;base.html&quot; %}

{% block title %}{{ section.title }}{% endblock %}

{% block content %}
&lt;h1&gt;{{ section.title }}&lt;/h1&gt;

{% for story in story_list %}
&lt;h2&gt;
  &lt;a href=&quot;{{ story.url }}&quot;&gt;
    {{ story.headline|upper }}
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;{{ story.tease|truncatewords:100 }}&lt;/p&gt;
{% endfor %}
{% endblock %}
</pre>
<hr>
<span id="Usage"></span><div class="header">
<p>
Next: <a href="#Variables" accesskey="n" rel="next">Variables</a>, Previous: <a href="#Basics" accesskey="p" rel="prev">Basics</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Usage-1"></span><h2 class="chapter">3 Usage</h2>
<span id="g_t_0023usage"></span><span id="index-djula_003aadd_002dtemplate_002ddirectory"></span>
<span id="index-djula_003a_002acurrent_002dstore_002a"></span>
<span id="index-djula_003acompile_002dtemplate_002a"></span>

<p>To render our templates, they need to be compiled first. We do that with
the :cl<code>COMPILE-TEMPLATE*</code> function. For inheritance to work, we
need to put all the templates in the same directory so that Djula can
find them when resolving templates inheritance.
</p>
<p>Djula looks for templates in the :cl<code>*CURRENT-STORE*</code>. For our
templates to be found, we have to add the template folder path the
templates store. We can do that with the
:cl<code>add-template-directory</code> function.
</p>
<p>Here is an example:
</p>
<pre class="verbatim">(add-template-directory (asdf:system-relative-pathname &quot;webapp&quot; &quot;templates/&quot;))

(defparameter +base.html+ (djula:compile-template* &quot;base.html&quot;))

(defparameter +welcome.html+ (djula:compile-template* &quot;welcome.html&quot;))

(defparameter +contact.html+ (djula:compile-template* &quot;contact.html&quot;))
</pre>
<p>Then we can render our compiled templates using the
:cl<code>RENDER-TEMPLATE*</code> function:
</p>
<pre class="verbatim">(djula:render-template* +welcome.html+ s
            :title &quot;Ukeleles&quot;
            :project-name &quot;Ukeleles&quot;
            :mode &quot;welcome&quot;)
</pre>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Auto_002dreload" accesskey="1">Auto-reload</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#API" accesskey="2">API</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Auto_002dreload"></span><div class="header">
<p>
Next: <a href="#API" accesskey="n" rel="next">API</a>, Up: <a href="#Usage" accesskey="u" rel="up">Usage</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Auto_002dreload-1"></span><h3 class="section">3.1 Auto-reload</h3>
<span id="g_t_0023auto_002dreload"></span><p>By default, Djula automatically recompiles the templates when they
change.
</p>
<p>If you want to disable this, use the :djula-prod <em>feature</em>:
</p>
<pre class="verbatim">(push :djula-prod *features*)
</pre>
<hr>
<span id="API"></span><div class="header">
<p>
Previous: <a href="#Auto_002dreload" accesskey="p" rel="prev">Auto-reload</a>, Up: <a href="#Usage" accesskey="u" rel="up">Usage</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="API-1"></span><h3 class="section">3.2 API</h3>
<span id="g_t_0023api"></span>
<hr>
<span id="Variables"></span><div class="header">
<p>
Next: <a href="#Tags" accesskey="n" rel="next">Tags</a>, Previous: <a href="#Usage" accesskey="p" rel="prev">Usage</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Variables-1"></span><h2 class="chapter">4 Variables</h2>
<span id="g_t_0023variables"></span><span id="index-variables"></span>
<span id="index-foo-2"></span>
<p>Variables look like this: <code>{{ variable }}</code>. When the template
engine encounters a variable, it evaluates that variable and replaces it
with the result. Variable names consist of any combination of
alphanumeric characters and the underscore (<code>&quot;_&quot;</code>). The dot
(<code>&quot;.&quot;</code>) also appears in variable sections, although that has a
special meaning, as indicated below. Importantly, <em>you cannot have
spaces or punctuation characters in variable names.</em>
</p>
<p>Use a dot (<code>.</code>) to access attributes of a variable.
</p>
<p>Behind the scenes
</p>
<p>For accessing variables the <code>ACCESS</code> Common Lisp library is used:
<a href="https://github.com/AccelerationNet/access">https://github.com/AccelerationNet/access</a>
In the above example, <code>{{ section.title }}</code> will be replaced
with the <code>title</code> attribute of the <code>section</code> object.
</p>
<p>Note that &quot;bar&quot; in a template expression like <code>{{ foo.bar }}</code>
will be interpreted as a literal string and not using the value of the
variable &quot;bar&quot;, if one exists in the template context.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Default-template-variables" accesskey="1">Default template variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Default-template-variables"></span><div class="header">
<p>
Up: <a href="#Variables" accesskey="u" rel="up">Variables</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Default-template-variables-1"></span><h3 class="section">4.1 Default template variables</h3>
<span id="g_t_0023default_002dtemplate_002dvariables"></span><p>You can use the <code>*default-template-arguments*</code> variable to store
arguments that will be available for all templates. It is a plist, so
use getf to add arguments, like this:
</p>
<pre class="verbatim">(setf (getf djula:*default-template-arguments* :foo) 'some-value)
</pre>
<p>And now, you can access <code>{{ foo }}</code> in your template.
</p>
<p>This is useful when you have many templates that rely on the same set of
variables. Use this variable to refactor your code when appropriate.
</p>
<p>Note that you could also write a function that wraps
<code>render-template*</code> and uses a default list of variables plus other
ones given as arguments:
</p>
<pre class="verbatim">(defun my-render-template (template stream &amp;rest args)
  (apply #'djula:render-template* template stream (list* :foo 'some-value args)))
</pre>


<hr>
<span id="Tags"></span><div class="header">
<p>
Next: <a href="#Comments" accesskey="n" rel="next">Comments</a>, Previous: <a href="#Variables" accesskey="p" rel="prev">Variables</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Tags-1"></span><h2 class="chapter">5 Tags</h2>
<span id="g_t_0023tags"></span>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Overview" accesskey="1">Overview</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#List-of-tags" accesskey="2">List of tags</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Custom-tags" accesskey="3">Custom tags</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Overview"></span><div class="header">
<p>
Next: <a href="#List-of-tags" accesskey="n" rel="next">List of tags</a>, Up: <a href="#Tags" accesskey="u" rel="up">Tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Overview-1"></span><h3 class="section">5.1 Overview</h3>
<span id="g_t_0023overview"></span><p>Tags look like this: <code>{% tag %}</code>. Tags are more complex than
variables: Some create text in the output, some control flow by
performing loops or logic, and some load external information into the
template to be used by later variables.
</p>
<p>Some tags require beginning and ending tags (i.e.
<code>{% tag %} ... tag contents ... {% endtag %}</code>).
</p>
<p>Here are some of the more commonly used tags:
</p>
<dl compact="compact">
<dt><code>for</code></dt>
<dd>
<p>Loop over each item in an array. For example, to display a list of
athletes provided in <code>athlete-list</code>:
</p>
<pre class="verbatim">&lt;ul&gt;
{% for athlete in athlete-list %}
    &lt;li&gt;{{ athlete.name }}&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
</pre>
</dd>
<dt><code>if</code>, <code>else</code></dt>
<dd>
<p>Evaluates a variable, and if that variable is &quot;true&quot; the contents of the
block are displayed:
</p>
<pre class="verbatim">{% if athlete-list %}
    Number of athletes: {{ athlete-list|length }}
{% else %}
    No athletes.
{% endif %}
</pre>
</dd>
<dt><code>block</code> and <code>extends</code></dt>
<dd>
<p>Set up <a href="#g_t_0023template_002dinheritance">template inheritance</a> (see below), a
powerful way of cutting down on &quot;boilerplate&quot; in templates.
</p>
</dd>
</dl>

<hr>
<span id="List-of-tags"></span><div class="header">
<p>
Next: <a href="#Custom-tags" accesskey="n" rel="next">Custom tags</a>, Previous: <a href="#Overview" accesskey="p" rel="prev">Overview</a>, Up: <a href="#Tags" accesskey="u" rel="up">Tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="List-of-tags-1"></span><h3 class="section">5.2 List of tags</h3>
<span id="g_t_0023list_002dof_002dtags"></span><p>Tags
block
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#block" accesskey="1">block</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#extends" accesskey="2">extends</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#super" accesskey="3">super</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#comment" accesskey="4">comment</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#cycle" accesskey="5">cycle</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#debug" accesskey="6">debug</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#filter" accesskey="7">filter</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#firstof" accesskey="8">firstof</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#for" accesskey="9">for</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#if">if</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Boolean-operators">Boolean operators</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#ifchanged">ifchanged</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#ifequal">ifequal</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#ifnotequal">ifnotequal</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#include">include</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="block"></span><div class="header">
<p>
Next: <a href="#extends" accesskey="n" rel="next">extends</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="block-1"></span><h4 class="subsection">5.2.1 block</h4>
<span id="g_t_0023block"></span><p>Defines a block that can be overridden by child templates.
</p>
<p>Sample usage:
</p>
<pre class="verbatim">{% block stylesheets %}
   ...
{% endblock %}
</pre>
<p>See <code>Template inheritance</code> for more information.
</p>
<p>extends
</p>
<hr>
<span id="extends"></span><div class="header">
<p>
Next: <a href="#super" accesskey="n" rel="next">super</a>, Previous: <a href="#block" accesskey="p" rel="prev">block</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="extends-1"></span><h4 class="subsection">5.2.2 extends</h4>
<span id="g_t_0023extends"></span><p>Extends a template
</p>
<p>Sample usage:
</p>
<pre class="verbatim">{% extends &quot;base.html&quot; %}
</pre>
<p>super
</p>
<hr>
<span id="super"></span><div class="header">
<p>
Next: <a href="#comment" accesskey="n" rel="next">comment</a>, Previous: <a href="#extends" accesskey="p" rel="prev">extends</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="super-1"></span><h4 class="subsection">5.2.3 super</h4>
<span id="g_t_0023super"></span><p>Gets the content of the block from the parent template. You can pass the
name of the block of the parent block you want to access. If no name is
passed, then the current block&rsquo;s parent is used.
</p>
<p>Sample usage:
</p>
<pre class="verbatim">{% super &quot;stylesheets&quot; %}

{% block stylesheets %}
  {% super %}
{% endblock %}
</pre>
<p>comment
</p>
<hr>
<span id="comment"></span><div class="header">
<p>
Next: <a href="#cycle" accesskey="n" rel="next">cycle</a>, Previous: <a href="#super" accesskey="p" rel="prev">super</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="comment-1"></span><h4 class="subsection">5.2.4 comment</h4>
<span id="g_t_0023comment"></span><p>Ignores everything between <code>{% comment %}</code> and
<code>{% endcomment %}</code>. An optional note may be inserted in the first
tag. For example, this is useful when commenting out code for
documenting why the code was disabled.
</p>
<p>Sample usage:
</p>
<pre class="verbatim">&lt;p&gt;Rendered text with {{ pub-date|date }}&lt;/p&gt;
{% comment &quot;Optional note&quot; %}
    &lt;p&gt;Commented out text with {{ create-date|date }}&lt;/p&gt;
{% endcomment %}
</pre>
<p><code>comment</code> tags cannot be nested.
</p>
<p>cycle
</p>
<hr>
<span id="cycle"></span><div class="header">
<p>
Next: <a href="#debug" accesskey="n" rel="next">debug</a>, Previous: <a href="#comment" accesskey="p" rel="prev">comment</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="cycle-1"></span><h4 class="subsection">5.2.5 cycle</h4>
<span id="g_t_0023cycle"></span><p>Produces one of its arguments each time this tag is encountered. The
first argument is produced on the first encounter, the second argument
on the second encounter, and so forth. Once all arguments are exhausted,
the tag cycles to the first argument and produces it again.
</p>
<p>This tag is particularly useful in a loop:
</p>
<pre class="verbatim">{% for o in some-list %}
    &lt;tr class=&quot;{% cycle &quot;row1&quot; &quot;row2&quot; %}&quot;&gt;
        ...
    &lt;/tr&gt;
{% endfor %}
</pre>
<p>The first iteration produces HTML that refers to class <code>row1</code>, the
second to <code>row2</code>, the third to <code>row1</code> again, and so on for
each iteration of the loop.
</p>
<p>You can use variables, too. For example, if you have two template
variables, <code>rowvalue1</code> and <code>rowvalue2</code>, you can alternate
between their values like this:
</p>
<pre class="verbatim">{% for o in some-list %}
    &lt;tr class=&quot;{% cycle rowvalue1 rowvalue2 %}&quot;&gt;
        ...
    &lt;/tr&gt;
{% endfor %}
</pre>
<p>You can mix variables and strings:
</p>
<pre class="verbatim">{% for o in some-list %}
    &lt;tr class=&quot;{% cycle &quot;row1&quot; rowvalue2 &quot;row3&quot; %}&quot;&gt;
        ...
    &lt;/tr&gt;
{% endfor %}
</pre>
<p>You can use any number of values in a <code>cycle</code> tag, separated by
spaces. Values enclosed in double quotes (<code>&quot;</code>) are treated as
string literals, while values without quotes are treated as template
variables.
</p>
<p>debug
</p>
<hr>
<span id="debug"></span><div class="header">
<p>
Next: <a href="#filter" accesskey="n" rel="next">filter</a>, Previous: <a href="#cycle" accesskey="p" rel="prev">cycle</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="debug-1"></span><h4 class="subsection">5.2.6 debug</h4>
<span id="g_t_0023debug"></span><p>Outputs a whole load of debugging information
</p>
<p>filter
</p>
<hr>
<span id="filter"></span><div class="header">
<p>
Next: <a href="#firstof" accesskey="n" rel="next">firstof</a>, Previous: <a href="#debug" accesskey="p" rel="prev">debug</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="filter-1"></span><h4 class="subsection">5.2.7 filter</h4>
<span id="g_t_0023filter"></span><p>Filters the contents of the block through one or more filters. Multiple
filters can be specified with pipes and filters can have arguments, just
as in variable syntax.
</p>
<p>Note that the block includes <em>all</em> the text between the
<code>filter</code> and <code>endfilter</code> tags.
</p>
<p>Sample usage:
</p>
<pre class="verbatim">{% filter force-escape|lower %}
    This text will be HTML-escaped, and will appear in all lowercase.
{% endfilter %}
</pre>
<p>Note
The <code>escape</code> and <code>safe</code> filters are not acceptable arguments.
Instead, use the <code>autoescape</code> tag to manage autoescaping for blocks
of template code.
firstof
</p>
<hr>
<span id="firstof"></span><div class="header">
<p>
Next: <a href="#for" accesskey="n" rel="next">for</a>, Previous: <a href="#filter" accesskey="p" rel="prev">filter</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="firstof-1"></span><h4 class="subsection">5.2.8 firstof</h4>
<span id="g_t_0023firstof"></span><p>Outputs the first argument variable that is not <code>False</code>. Outputs
nothing if all the passed variables are <code>False</code>.
</p>
<p>Sample usage:
</p>
<pre class="verbatim">{% firstof var1 var2 var3 %}
</pre>
<p>You can also use a literal string as a fallback value in case all passed
variables are False:
</p>
<pre class="verbatim">{% firstof var1 var2 var3 &quot;fallback value&quot; %}
</pre>
<p>for
</p>
<hr>
<span id="for"></span><div class="header">
<p>
Next: <a href="#if" accesskey="n" rel="next">if</a>, Previous: <a href="#firstof" accesskey="p" rel="prev">firstof</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="for-1"></span><h4 class="subsection">5.2.9 for</h4>
<span id="g_t_0023for"></span><p>Loops over each item in an array, making the item available in a context
variable. For example, to display a list of athletes provided in
<code>athlete-list</code>:
</p>
<pre class="verbatim">&lt;ul&gt;
{% for athlete in athlete-list %}
    &lt;li&gt;{{ athlete.name }}&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
</pre>
<p>If you need to loop over an association list, you can unpack the values
in each sublist into individual variables. For example, if your context
contains a list of (x . y) coordinates called <code>points</code>, you could
use the following to output the list of points:
</p>
<pre class="verbatim">{% for (x . y) in points %}
    There is a point at {{ x }},{{ y }}
{% endfor %}
</pre>
<p>This can also be useful if you need to access the items in a hash-table.
For example, if your context contained a hash-table named <code>data</code>,
the following would display the keys and values of the hash-table:
</p>
<pre class="verbatim">{% for (key . value) in data.items %}
    {{ key }}: {{ value }}
{% endfor %}
</pre>
<p>The for loop sets a number of variables available within the loop:
</p>
<table>
<thead><tr><th>Variable</th><th>Description</th></tr></thead>
<tr><td><code>forloop.counter</code></td><td>The current iteration of the loop (1-indexed)</td></tr>
<tr><td><code>forloop.counter0</code></td><td>The current iteration of the loop (0-indexed)</td></tr>
<tr><td><code>forloop.revcounter</code></td><td>The number of iterations from the end of the loop (1-indexed)</td></tr>
<tr><td><code>forloop.revcounter0</code></td><td>The number of iterations from the end of the loop (0-indexed)</td></tr>
<tr><td><code>forloop.first</code></td><td>True if this is the first time through the loop</td></tr>
<tr><td><code>forloop.last</code></td><td>True if this is the last time through the loop</td></tr>
<tr><td><code>forloop.parentloop</code></td><td>For nested loops, this is the loop surrounding the current one</td></tr>
</table>

<p>if
</p>
<hr>
<span id="if"></span><div class="header">
<p>
Next: <a href="#Boolean-operators" accesskey="n" rel="next">Boolean operators</a>, Previous: <a href="#for" accesskey="p" rel="prev">for</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="if-1"></span><h4 class="subsection">5.2.10 if</h4>
<span id="g_t_0023if"></span><p>The <code>{% if %}</code> tag evaluates a variable, and if that variable is
&quot;true&quot; (i.e. exists, is not empty, and is not a false boolean value) the
contents of the block are output:
</p>
<pre class="verbatim">{% if athlete-list %}
    Number of athletes: {{ athlete-list|length }}
{% else %}
    No athletes.
{% endif %}
</pre>
<p>In the above, if <code>athlete-list</code> is not empty, the number of
athletes will be displayed by the <code>{{ athlete-list|length }}</code>
variable.
</p>
<hr>
<span id="Boolean-operators"></span><div class="header">
<p>
Next: <a href="#ifchanged" accesskey="n" rel="next">ifchanged</a>, Previous: <a href="#if" accesskey="p" rel="prev">if</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Boolean-operators-1"></span><h4 class="subsection">5.2.11 Boolean operators</h4>
<span id="g_t_0023boolean_002doperators"></span><p><code>if</code> tags may use <code>and</code>, <code>or</code> or <code>not</code> to test a
number of variables or to negate a given variable:
</p>
<pre class="verbatim">{% if athlete-list and coach-list %}
    Both athletes and coaches are available.
{% endif %}

{% if not athlete-list %}
    There are no athletes.
{% endif %}

{% if athlete-list or coach-list %}
    There are some athletes or some coaches.
{% endif %}

{% if not athlete-list or coach-list %}
    There are no athletes or there are some coaches (OK, so
    writing English translations of boolean logic sounds
    stupid; it's not our fault).
{% endif %}

{% if athlete-list and not coach-list %}
    There are some athletes and absolutely no coaches.
{% endif %}
</pre>
<p>Use of both <code>and</code> and <code>or</code> clauses within the same tag is
allowed, with <code>and</code> having higher precedence than <code>or</code> e.g.:
</p>
<pre class="verbatim">{% if athlete-list and coach-list or cheerleader-list %}
</pre>
<p>will be interpreted like:
</p>
<pre class="verbatim">(if (or (athlete-list and coach-list) cheerleader-list) ..)
</pre>
<p>Use of actual parentheses in the <code>if</code> tag is invalid syntax. If you
need them to indicate precedence, you should use nested <code>if</code> tags.
</p>
<p>ifchanged
</p>
<hr>
<span id="ifchanged"></span><div class="header">
<p>
Next: <a href="#ifequal" accesskey="n" rel="next">ifequal</a>, Previous: <a href="#Boolean-operators" accesskey="p" rel="prev">Boolean operators</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="ifchanged-1"></span><h4 class="subsection">5.2.12 ifchanged</h4>
<span id="g_t_0023ifchanged"></span><p>Check if a value has changed from the last iteration of a loop.
</p>
<p>The <code>{% ifchanged %}</code> block tag is used within a loop.
</p>
<p>If given one or more variables, check whether any variable has changed.
</p>
<p>For example, the following shows the date every time it changes, while
showing the hour if either the hour or the date has changed:
</p>
<pre class="verbatim">{% for date in days %}
    {% ifchanged date.date %} {{ date.date }} {% endifchanged %}
    {% ifchanged date.hour date.date %}
        {{ date.hour }}
    {% endifchanged %}
{% endfor %}
</pre>
<p>The <code>ifchanged</code> tag can also take an optional <code>{% else %}</code>
clause that will be displayed if the value has not changed:
</p>
<pre class="verbatim">{% for match in matches %}
    &lt;div style=&quot;background-color:
        {% ifchanged match.ballot-id %}
            {% cycle &quot;red&quot; &quot;blue&quot; %}
        {% else %}
            gray
        {% endifchanged %}
    &quot;&gt;{{ match }}&lt;/div&gt;
{% endfor %}
</pre>
<p>ifequal
</p>
<hr>
<span id="ifequal"></span><div class="header">
<p>
Next: <a href="#ifnotequal" accesskey="n" rel="next">ifnotequal</a>, Previous: <a href="#ifchanged" accesskey="p" rel="prev">ifchanged</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="ifequal-1"></span><h4 class="subsection">5.2.13 ifequal</h4>
<span id="g_t_0023ifequal"></span><p>Output the contents of the block if the two arguments equal each other.
</p>
<p>Example:
</p>
<pre class="verbatim">{% ifequal user.pk comment.user-id %}
    ...
{% endifequal %}
</pre>
<p>As in the <code>if</code> tag, an <code>{% else %}</code> clause is optional.
</p>
<p>The arguments can be hard-coded strings, so the following is valid:
</p>
<pre class="verbatim">{% ifequal user.username &quot;adrian&quot; %}
    ...
{% endifequal %}
</pre>
<p>An alternative to the <code>ifequal</code> tag is to use the <code>if</code> tag and
the <code>==</code> operator.
</p>
<p>ifnotequal
</p>
<hr>
<span id="ifnotequal"></span><div class="header">
<p>
Next: <a href="#include" accesskey="n" rel="next">include</a>, Previous: <a href="#ifequal" accesskey="p" rel="prev">ifequal</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="ifnotequal-1"></span><h4 class="subsection">5.2.14 ifnotequal</h4>
<span id="g_t_0023ifnotequal"></span><p>Just like <code>ifequal</code>, except it tests that the two arguments are not
equal.
</p>
<p>An alternative to the <code>ifnotequal</code> tag is to use the <code>if</code> tag
and the <code>!=</code> operator.
</p>
<p>include
</p>
<hr>
<span id="include"></span><div class="header">
<p>
Previous: <a href="#ifnotequal" accesskey="p" rel="prev">ifnotequal</a>, Up: <a href="#List-of-tags" accesskey="u" rel="up">List of tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="include-1"></span><h4 class="subsection">5.2.15 include</h4>
<span id="g_t_0023include"></span><p>Loads a template and renders it with the current context. This is a way
of &quot;including&quot; other templates within a template.
</p>
<p>The template name can either be a variable or a hard-coded (quoted)
string, in either single or double quotes.
</p>
<p>This example includes the contents of the template
<code>&quot;foo/bar.html&quot;</code>:
</p>
<pre class="verbatim">{% include &quot;foo/bar.html&quot; %}
</pre>
<p>A set of parameters can also be added, which become available as context
variables when the included template is rendered:
</p>
<pre class="verbatim">{% include &quot;user.html&quot; :user record.creator %}
{% include &quot;user.html&quot; :user record.updater %}
</pre>
<hr>
<span id="Custom-tags"></span><div class="header">
<p>
Previous: <a href="#List-of-tags" accesskey="p" rel="prev">List of tags</a>, Up: <a href="#Tags" accesskey="u" rel="up">Tags</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Custom-tags-1"></span><h3 class="section">5.3 Custom tags</h3>
<span id="g_t_0023custom_002dtags"></span><p>TODO
</p>
<hr>
<span id="Comments"></span><div class="header">
<p>
Next: <a href="#Verbatim" accesskey="n" rel="next">Verbatim</a>, Previous: <a href="#Tags" accesskey="p" rel="prev">Tags</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Comments-1"></span><h2 class="chapter">6 Comments</h2>
<span id="g_t_0023comments"></span><p>To comment-out part of a line in a template, use the comment syntax:
<code>{# #}</code>.
</p>
<p>For example, this template would render as <code>'hello'</code>:
</p>
<pre class="verbatim">{# greeting #}hello
</pre>
<p>A comment can contain any template code, invalid or not. For example:
</p>
<pre class="verbatim">{# {% if foo %}bar{% else %} #}
</pre>
<p>If you need to comment out a multiline portion of the template, see the
<code>comment</code> tag.
</p>
<hr>
<span id="Verbatim"></span><div class="header">
<p>
Next: <a href="#Filters" accesskey="n" rel="next">Filters</a>, Previous: <a href="#Comments" accesskey="p" rel="prev">Comments</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Verbatim-1"></span><h2 class="chapter">7 Verbatim</h2>
<span id="g_t_0023verbatim"></span><p>If you want to leave some portion of text unprocessed by Djula, use the
verbatim syntax: <code>{$ $}</code>.
</p>
<p>For example, this template would render as
<code>'this is {{verbatim}}'</code>:
</p>
<pre class="verbatim">{$ this is {{verbatim}} $}
</pre>


<hr>
<span id="Filters"></span><div class="header">
<p>
Next: <a href="#Template-inheritance" accesskey="n" rel="next">Template inheritance</a>, Previous: <a href="#Verbatim" accesskey="p" rel="prev">Verbatim</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Filters-1"></span><h2 class="chapter">8 Filters</h2>
<span id="g_t_0023filters"></span>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Overview-of-filters" accesskey="1">Overview of filters</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#List-of-filters" accesskey="2">List of filters</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Custom-filters" accesskey="3">Custom filters</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Overview-of-filters"></span><div class="header">
<p>
Next: <a href="#List-of-filters" accesskey="n" rel="next">List of filters</a>, Up: <a href="#Filters" accesskey="u" rel="up">Filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Overview-of-filters-1"></span><h3 class="section">8.1 Overview of filters</h3>
<span id="g_t_0023overview_002d1"></span><p>You can modify variables for display by using <strong>filters</strong>.
</p>
<p>Filters look like this: <code>{{ name|lower }}</code>. This displays the
value of the <code>{{ name }}</code> variable after being filtered through
the <code>lower</code> filter, which converts text to lowercase. Use a pipe
(<code>|</code>) to apply a filter.
</p>
<p>Filters can be &quot;chained.&quot; The output of one filter is applied to the
next. <code>{{ text|escape|linebreaks }}</code> is a common idiom for
escaping text contents, then converting line breaks to <code>&lt;p&gt;</code> tags.
</p>
<p>Some filters take arguments. A filter argument looks like this:
<code>{{ bio|truncatewords:30 }}</code>. This will display the first 30
words of the <code>bio</code> variable.
</p>
<p>Filter arguments that contain spaces must be quoted; for example, to
join a list with commas and spaced you&rsquo;d use
<code>{{ list|join:&quot;, &quot; }}</code>.
</p>
<p>Djula provides about thirty built-in template filters. You can read all
about them in the
<code>built-in filter reference &lt;ref-templates-builtins-filters&gt;</code>. To
give you a taste of what&rsquo;s available, here are some of the more commonly
used template filters:
</p>
<hr>
<span id="List-of-filters"></span><div class="header">
<p>
Next: <a href="#Custom-filters" accesskey="n" rel="next">Custom filters</a>, Previous: <a href="#Overview-of-filters" accesskey="p" rel="prev">Overview of filters</a>, Up: <a href="#Filters" accesskey="u" rel="up">Filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="List-of-filters-1"></span><h3 class="section">8.2 List of filters</h3>
<span id="g_t_0023list_002dof_002dfilters"></span><p>Filters
add
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#add" accesskey="1">add</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#addslashes" accesskey="2">addslashes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#capfirst" accesskey="3">capfirst</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#cut" accesskey="4">cut</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#date" accesskey="5">date</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#time" accesskey="6">time</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#datetime" accesskey="7">datetime</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#default" accesskey="8">default</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#reverse" accesskey="9">reverse</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#divisibleby">divisibleby</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#sort">sort</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#first">first</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#join">join</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#last">last</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#length">length</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#length_005fis">length_is</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#linebreaks">linebreaks</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#linebreaksbr">linebreaksbr</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#lower">lower</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#make_005flist">make_list</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#safe-escape">safe escape</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#slice">slice</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#force_002descape">force-escape</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#format">format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#replace-with">replace  with</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#rest">rest</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#scan">scan</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#time">time</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#truncatechars">truncatechars</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#upper">upper</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#urlencode">urlencode</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#escape">escape</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#escapejs">escapejs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#filesizeformat">filesizeformat</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="add"></span><div class="header">
<p>
Next: <a href="#addslashes" accesskey="n" rel="next">addslashes</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="add-1"></span><h4 class="subsection">8.2.1 add</h4>
<span id="g_t_0023add"></span><p>Adds the argument to the value.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|add:2 }}
</pre>
<p>If <code>value</code> is <code>4</code>, then the output will be <code>6</code>.
</p>
<p>addslashes
</p>
<hr>
<span id="addslashes"></span><div class="header">
<p>
Next: <a href="#capfirst" accesskey="n" rel="next">capfirst</a>, Previous: <a href="#add" accesskey="p" rel="prev">add</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="addslashes-1"></span><h4 class="subsection">8.2.2 addslashes</h4>
<span id="g_t_0023addslashes"></span><p>Adds slashes before quotes. Useful for escaping strings in CSV, for
example.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|addslashes }}
</pre>
<p>If <code>value</code> is <code>&quot;I'm using Djula&quot;</code>, the output will be
<code>&quot;I\'m using Djula&quot;</code>.
</p>
<p>capfirst
</p>
<hr>
<span id="capfirst"></span><div class="header">
<p>
Next: <a href="#cut" accesskey="n" rel="next">cut</a>, Previous: <a href="#addslashes" accesskey="p" rel="prev">addslashes</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="capfirst-1"></span><h4 class="subsection">8.2.3 capfirst</h4>
<span id="g_t_0023capfirst"></span><p>Capitalizes the first character of the value. If the first character is
not a letter, this filter has no effect.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|capfirst }}
</pre>
<p>If <code>value</code> is <code>&quot;djula&quot;</code>, the output will be <code>&quot;Djula&quot;</code>.
</p>
<p>center
cut
</p>
<hr>
<span id="cut"></span><div class="header">
<p>
Next: <a href="#date" accesskey="n" rel="next">date</a>, Previous: <a href="#capfirst" accesskey="p" rel="prev">capfirst</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="cut-1"></span><h4 class="subsection">8.2.4 cut</h4>
<span id="g_t_0023cut"></span><p>Removes all values of arg from the given string.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|cut:&quot; &quot; }}
</pre>
<p>If <code>value</code> is <code>&quot;String with spaces&quot;</code>, the output will be
<code>&quot;Stringwithspaces&quot;</code>.
</p>
<p>date
</p>
<hr>
<span id="date"></span><div class="header">
<p>
Next: <a href="#datetime" accesskey="n" rel="next">datetime</a>, Previous: <a href="#cut" accesskey="p" rel="prev">cut</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="date-1"></span><h4 class="subsection">8.2.5 date</h4>
<span id="g_t_0023date"></span><p>Formats a date
</p>
<dl compact="compact">
<dt>Example::</dt>
<dd>
<p>{{ date-today | date }}
</p>
</dd>
</dl>

<p>A LOCAL-TIME format spec can be provided:
</p>
<pre class="verbatim">(defvar timestamp 3752179200)
{{ timestamp | date:(:year &quot;/&quot; (:month 2) &quot;/&quot; (:day 2)) }} ;; shows 2018/11/26
</pre>
<hr>
<span id="datetime"></span><div class="header">
<p>
Next: <a href="#default" accesskey="n" rel="next">default</a>, Previous: <a href="#date" accesskey="p" rel="prev">date</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="datetime-1"></span><h4 class="subsection">8.2.6 datetime</h4>
<span id="g_t_0023datetime"></span><p>Formats a date and time
</p>
<p>Example:
</p>
<pre class="verbatim">{{ time-now | datetime }}
</pre>
<p>default
</p>
<hr>
<span id="default"></span><div class="header">
<p>
Next: <a href="#reverse" accesskey="n" rel="next">reverse</a>, Previous: <a href="#datetime" accesskey="p" rel="prev">datetime</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="default-1"></span><h4 class="subsection">8.2.7 default</h4>
<span id="g_t_0023default"></span><p>If value evaluates to <code>False</code>, uses the given default. Otherwise,
uses the value.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|default &quot;nothing&quot; }}
</pre>
<p>If <code>value</code> is <code>&quot;&quot;</code> (the empty string), the output will be
<code>nothing</code>.
</p>
<p>default_if_none
reverse
</p>
<hr>
<span id="reverse"></span><div class="header">
<p>
Next: <a href="#divisibleby" accesskey="n" rel="next">divisibleby</a>, Previous: <a href="#default" accesskey="p" rel="prev">default</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="reverse-1"></span><h4 class="subsection">8.2.8 reverse</h4>
<span id="g_t_0023reverse"></span><p>Takes a list and returns that list reversed.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ list | reverse }}
</pre>
<hr>
<span id="divisibleby"></span><div class="header">
<p>
Next: <a href="#sort" accesskey="n" rel="next">sort</a>, Previous: <a href="#reverse" accesskey="p" rel="prev">reverse</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="divisibleby-1"></span><h4 class="subsection">8.2.9 divisibleby</h4>
<span id="g_t_0023divisibleby"></span><p>Returns <code>True</code> if the value is divisible by the argument.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|divisibleby:&quot;3&quot; }}
</pre>
<p>If <code>value</code> is <code>21</code>, the output would be <code>True</code>.
</p>
<p>sort
</p>
<hr>
<span id="sort"></span><div class="header">
<p>
Next: <a href="#escape" accesskey="n" rel="next">escape</a>, Previous: <a href="#divisibleby" accesskey="p" rel="prev">divisibleby</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="sort-1"></span><h4 class="subsection">8.2.10 sort</h4>
<span id="g_t_0023sort"></span><p>Takes a list and returns that list sorted.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ list | sort }}
</pre>
<p>escape
</p>
<hr>
<span id="escape"></span><div class="header">
<p>
Next: <a href="#escapejs" accesskey="n" rel="next">escapejs</a>, Previous: <a href="#sort" accesskey="p" rel="prev">sort</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="escape-1"></span><h4 class="subsection">8.2.11 escape</h4>
<span id="g_t_0023escape"></span><p>Escapes a string&rsquo;s HTML. Specifically, it makes these replacements:
</p>
<ul>
<li> <code>&lt;</code> is converted to <code>&amp;lt;</code>
</li><li> <code>&gt;</code> is converted to <code>&amp;gt;</code>
</li><li> <code>'</code> (single quote) is converted to <code>&amp;#39;</code>
</li><li> <code>&quot;</code> (double quote) is converted to <code>&amp;quot;</code>
</li><li> <code>&amp;</code> is converted to <code>&amp;amp;</code>
</li></ul>

<p>The escaping is only applied when the string is output, so it does not
matter where in a chained sequence of filters you put <code>escape</code>: it
will always be applied as though it were the last filter. If you want
escaping to be applied immediately, use the <code>force-escape</code> filter.
</p>
<p>Applying <code>escape</code> to a variable that would normally have
auto-escaping applied to the result will only result in one round of
escaping being done. So it is safe to use this function even in
auto-escaping environments. If you want multiple escaping passes to be
applied, use the <code>force-escape</code> filter.
</p>
<p>For example, you can apply <code>escape</code> to fields when
<code>autoescape</code> is off:
</p>
<pre class="verbatim">{% autoescape off %}
{{ title|escape }}
{% endautoescape %}
</pre>
<p>escapejs
</p>
<hr>
<span id="escapejs"></span><div class="header">
<p>
Next: <a href="#filesizeformat" accesskey="n" rel="next">filesizeformat</a>, Previous: <a href="#escape" accesskey="p" rel="prev">escape</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="escapejs-1"></span><h4 class="subsection">8.2.12 escapejs</h4>
<span id="g_t_0023escapejs"></span><p>Escapes characters for use in JavaScript strings. This does <em>not</em>
make the string safe for use in HTML, but does protect you from syntax
errors when using templates to generate JavaScript/JSON.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|escapejs }}
</pre>
<p>If <code>value</code> is
<code>&quot;testing\r\njavascript \'string&quot; &lt;b&gt;escaping&lt;/b&gt;&quot;</code>, the output
will be
<code>&quot;testing\\u000D\\u000Ajavascript \\u0027string\\u0022 \\u003Cb\\u003Eescaping\\u003C/b\\u003E&quot;</code>.
</p>
<p>filesizeformat
</p>
<hr>
<span id="filesizeformat"></span><div class="header">
<p>
Next: <a href="#first" accesskey="n" rel="next">first</a>, Previous: <a href="#escapejs" accesskey="p" rel="prev">escapejs</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="filesizeformat-1"></span><h4 class="subsection">8.2.13 filesizeformat</h4>
<span id="g_t_0023filesizeformat"></span><p>Formats the value like a &rsquo;human-readable&rsquo; file size (i.e.
<code>'13 KB'</code>, <code>'4.1 MB'</code>, <code>'102 bytes'</code>, etc).
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|filesizeformat }}
</pre>
<p>If <code>value</code> is 123456789, the output would be <code>117.7 MB</code>.
</p>
<p>File sizes and SI units
</p>
<p>Strictly speaking, <code>filesizeformat</code> does not conform to the
International System of Units which recommends using KiB, MiB, GiB, etc.
when byte sizes are calculated in powers of 1024 (which is the case
here). Instead, Djula uses traditional unit names (KB, MB, GB, etc.)
corresponding to names that are more commonly used.
first
</p>
<hr>
<span id="first"></span><div class="header">
<p>
Next: <a href="#join" accesskey="n" rel="next">join</a>, Previous: <a href="#filesizeformat" accesskey="p" rel="prev">filesizeformat</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="first-1"></span><h4 class="subsection">8.2.14 first</h4>
<span id="g_t_0023first"></span><p>Returns the first item in a list.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|first }}
</pre>
<p>If <code>value</code> is the list <code>(&quot;a&quot; &quot;b&quot; &quot;c&quot;)</code>, the output will be
<code>&quot;a&quot;</code>.
</p>
<p>join
</p>
<hr>
<span id="join"></span><div class="header">
<p>
Next: <a href="#last" accesskey="n" rel="next">last</a>, Previous: <a href="#first" accesskey="p" rel="prev">first</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="join-1"></span><h4 class="subsection">8.2.15 join</h4>
<span id="g_t_0023join"></span><p>Joins a list with a string.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|join:&quot; // &quot; }}
</pre>
<p>If <code>value</code> is the list <code>(&quot;a&quot; &quot;b&quot; &quot;c&quot;)</code>, the output will be the
string <code>&quot;a // b // c&quot;</code>.
</p>
<p>last
</p>
<hr>
<span id="last"></span><div class="header">
<p>
Next: <a href="#length" accesskey="n" rel="next">length</a>, Previous: <a href="#join" accesskey="p" rel="prev">join</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="last-1"></span><h4 class="subsection">8.2.16 last</h4>
<span id="g_t_0023last"></span><p>Returns the last item in a list.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|last }}
</pre>
<p>If <code>value</code> is the list <code>(&quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot;)</code>, the output will be
the string <code>&quot;d&quot;</code>.
</p>
<p>length
</p>
<hr>
<span id="length"></span><div class="header">
<p>
Next: <a href="#length_005fis" accesskey="n" rel="next">length_is</a>, Previous: <a href="#last" accesskey="p" rel="prev">last</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="length-1"></span><h4 class="subsection">8.2.17 length</h4>
<span id="g_t_0023length"></span><p>Returns the length of the value. This works for both strings and lists.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|length }}
</pre>
<p>If <code>value</code> is <code>(&quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot;)</code> or <code>&quot;abcd&quot;</code>, the output
will be <code>4</code>.
</p>
<p>length_is
</p>
<hr>
<span id="length_005fis"></span><div class="header">
<p>
Next: <a href="#linebreaks" accesskey="n" rel="next">linebreaks</a>, Previous: <a href="#length" accesskey="p" rel="prev">length</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="length_005fis-1"></span><h4 class="subsection">8.2.18 length_is</h4>
<span id="g_t_0023length_005fis"></span><p>Returns <code>True</code> if the value&rsquo;s length is the argument, or
<code>False</code> otherwise.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|length_is:&quot;4&quot; }}
</pre>
<p>If <code>value</code> is <code>['a', 'b', 'c', 'd']</code> or <code>&quot;abcd&quot;</code>, the
output will be <code>True</code>.
</p>
<blockquote>
<p>linebreaks
</p></blockquote>

<hr>
<span id="linebreaks"></span><div class="header">
<p>
Next: <a href="#linebreaksbr" accesskey="n" rel="next">linebreaksbr</a>, Previous: <a href="#length_005fis" accesskey="p" rel="prev">length_is</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="linebreaks-1"></span><h4 class="subsection">8.2.19 linebreaks</h4>
<span id="g_t_0023linebreaks"></span><p>Replaces line breaks in plain text with appropriate HTML; a single
newline becomes an HTML line break (<code>&lt;br /&gt;</code>) and a new line
followed by a blank line becomes a paragraph break (<code>&lt;/p&gt;</code>).
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|linebreaks }}
</pre>
<p>If <code>value</code> is <code>Joel\nis a slug</code>, the output will be
<code>&lt;p&gt;Joel&lt;br /&gt;is a slug&lt;/p&gt;</code>.
</p>
<p>linebreaksbr
</p>
<hr>
<span id="linebreaksbr"></span><div class="header">
<p>
Next: <a href="#lower" accesskey="n" rel="next">lower</a>, Previous: <a href="#linebreaks" accesskey="p" rel="prev">linebreaks</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="linebreaksbr-1"></span><h4 class="subsection">8.2.20 linebreaksbr</h4>
<span id="g_t_0023linebreaksbr"></span><p>Converts all newlines in a piece of plain text to HTML line breaks
(<code>&lt;br /&gt;</code>).
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|linebreaksbr }}
</pre>
<p>If <code>value</code> is <code>Joel\nis a slug</code>, the output will be
<code>Joel&lt;br /&gt;is a slug</code>.
</p>
<p>linenumbers
lower
</p>
<hr>
<span id="lower"></span><div class="header">
<p>
Next: <a href="#make_005flist" accesskey="n" rel="next">make_list</a>, Previous: <a href="#linebreaksbr" accesskey="p" rel="prev">linebreaksbr</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="lower-1"></span><h4 class="subsection">8.2.21 lower</h4>
<span id="g_t_0023lower"></span><p>Converts a string into all lowercase.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|lower }}
</pre>
<p>If <code>value</code> is <code>Still MAD At Yoko</code>, the output will be
<code>still mad at yoko</code>.
</p>
<p>make_list
</p>
<hr>
<span id="make_005flist"></span><div class="header">
<p>
Next: <a href="#safe-escape" accesskey="n" rel="next">safe escape</a>, Previous: <a href="#lower" accesskey="p" rel="prev">lower</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="make_005flist-1"></span><h4 class="subsection">8.2.22 make_list</h4>
<span id="g_t_0023make_005flist"></span><p>Returns the value turned into a list. For a string, it&rsquo;s a list of
characters. For an integer, the argument is cast into an unicode string
before creating a list.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|make_list }}
</pre>
<p>If <code>value</code> is the string <code>&quot;Joel&quot;</code>, the output would be the
list <code>['J', 'o', 'e', 'l']</code>. If <code>value</code> is <code>123</code>, the
output will be the list <code>['1', '2', '3']</code>.
</p>
<p>safe
</p>
<hr>
<span id="safe-escape"></span><div class="header">
<p>
Next: <a href="#slice" accesskey="n" rel="next">slice</a>, Previous: <a href="#make_005flist" accesskey="p" rel="prev">make_list</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="safe_002c-escape"></span><h4 class="subsection">8.2.23 safe, escape</h4>
<span id="g_t_0023safe_002descape"></span><p>Marks a string as not requiring further HTML escaping prior to output.
When autoescaping is off, this filter has no effect.
</p>
<p>Note
If you are chaining filters, a filter applied after <code>safe</code> can make
the contents unsafe again. For example, the following code prints the
variable as is, unescaped:
</p>
<pre class="verbatim">{{ var|safe|escape }}
</pre>
<p>safeseq
slice
</p>
<hr>
<span id="slice"></span><div class="header">
<p>
Next: <a href="#force_002descape" accesskey="n" rel="next">force-escape</a>, Previous: <a href="#safe-escape" accesskey="p" rel="prev">safe escape</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="slice-1"></span><h4 class="subsection">8.2.24 slice</h4>
<span id="g_t_0023slice"></span><p>Returns a slice of a sequence (i.e. lists, vectors, strings)
</p>
<p>Uses the Common Lisp <code>cl-slice</code> library.
</p>
<p>Syntax:
</p>
<pre class="verbatim">{{ seq | slice: slices }}
</pre>
<p>Each <code>slice</code> selects a subset of subscripts along the corresponding
axis.
</p>
<ul>
<li> A nonnegative integer selects the corresponding index, while a negative
integer selects an index counting backwards from the last index:

<pre class="verbatim">{{ list | slice: 4 }}
</pre>
</li></ul>

<p>if the list is <code>(1 2 3 4 5 6)</code> it will output <code>(5)</code>
</p>
<p>* <code>(start . end)</code> to select a range. When <code>end</code> is <code>NIL</code>,
the last index is included. Each boundary is resolved according to the
other rules if applicable, so you can use negative integers:
</p>
<pre class="verbatim">{{ string | slice: (0 . 5) }}
{{ string | slice: (5 . nil) }}
</pre>
<p>if the string is <code>&quot;Hello world&quot;</code> is will output <code>Hello</code> and
<code>world</code>.
</p>
<p>slugify
force-escape
</p>
<hr>
<span id="force_002descape"></span><div class="header">
<p>
Next: <a href="#format" accesskey="n" rel="next">format</a>, Previous: <a href="#slice" accesskey="p" rel="prev">slice</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="force_002descape-1"></span><h4 class="subsection">8.2.25 force-escape</h4>
<span id="g_t_0023force_002descape"></span><p>Forces escaping HTML characters (<code>&lt;, &gt;, ', \, &amp;</code>):
</p>
<pre class="verbatim">{{ value | force-escape }}
</pre>
<p>It calls <code>djula::escape-for-html</code>.
</p>
<p>format
</p>
<hr>
<span id="format"></span><div class="header">
<p>
Next: <a href="#replace-with" accesskey="n" rel="next">replace  with</a>, Previous: <a href="#force_002descape" accesskey="p" rel="prev">force-escape</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="format-1"></span><h4 class="subsection">8.2.26 format</h4>
<span id="g_t_0023format"></span><p>Formats the variable according to the argument, a string formatting
specifier. This specifier uses Common Lisp string formatting syntax
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value | format:&quot;~:d&quot; }}
</pre>
<p>If <code>value</code> is <code>1000000</code>, the output will be <code>1,000,000</code>.
</p>
<p>striptags
</p>
<hr>
<span id="replace-with"></span><div class="header">
<p>
Next: <a href="#rest" accesskey="n" rel="next">rest</a>, Previous: <a href="#format" accesskey="p" rel="prev">format</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="replace-_002e_002e_002e-with"></span><h4 class="subsection">8.2.27 replace ... with</h4>
<span id="g_t_0023replace_002d_002e_002e_002e_002dwith"></span><p>The <code>replace</code> and the <code>with</code> filters work together:
</p>
<pre class="verbatim">{{ value | replace:regexp | with:string }}
</pre>
<p>This will replace all occurences of the regexp in &quot;value&quot; with a new
string, using <code>ppcre:regex-replace-all</code>.
</p>
<p>rest
</p>
<hr>
<span id="rest"></span><div class="header">
<p>
Next: <a href="#scan" accesskey="n" rel="next">scan</a>, Previous: <a href="#replace-with" accesskey="p" rel="prev">replace  with</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="rest-1"></span><h4 class="subsection">8.2.28 rest</h4>
<span id="g_t_0023rest"></span><p>Returns the <code>rest</code> of a list (aka <code>cdr</code>).
</p>
<p>For example:
</p>
<pre class="verbatim">{{ values|rest }}
</pre>
<p>If <code>values</code> is the list <code>(&quot;a&quot; &quot;b&quot; &quot;c&quot;)</code>, the output will be
<code>(&quot;b&quot; &quot;c&quot;)</code>.
</p>
<p>scan
</p>
<hr>
<span id="scan"></span><div class="header">
<p>
Next: <a href="#time" accesskey="n" rel="next">time</a>, Previous: <a href="#rest" accesskey="p" rel="prev">rest</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="scan-1"></span><h4 class="subsection">8.2.29 scan</h4>
<span id="g_t_0023scan"></span><p>Extracts and displays a regexp from the value:
</p>
<pre class="verbatim">{{ value | scan:regexp }}
</pre>
<p>This will display only the text that matches the regexp (using
<code>ppcre:scan-to-strings</code>).
</p>
<p>time
</p>
<hr>
<span id="time"></span><div class="header">
<p>
Next: <a href="#truncatechars" accesskey="n" rel="next">truncatechars</a>, Previous: <a href="#scan" accesskey="p" rel="prev">scan</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="time-1"></span><h4 class="subsection">8.2.30 time</h4>
<span id="g_t_0023time_002d1"></span><p>Formats a time according to the given format.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value | time }}
</pre>
<p>truncatechars
</p>
<hr>
<span id="truncatechars"></span><div class="header">
<p>
Next: <a href="#upper" accesskey="n" rel="next">upper</a>, Previous: <a href="#time" accesskey="p" rel="prev">time</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="truncatechars-1"></span><h4 class="subsection">8.2.31 truncatechars</h4>
<span id="g_t_0023truncatechars"></span><p>Truncates a string if it is longer than the specified number of
characters. Truncated strings will end with the
:cl:symbol:<em>ELLISION-STRING</em>, which defaults to &quot;...&quot;.
</p>
<p><strong>Argument:</strong> Number of characters to truncate to
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|truncatechars:9 }}
</pre>
<p>If <code>value</code> is <code>&quot;Joel is a slug&quot;</code>, the output will be
<code>&quot;Joel i...&quot;</code>.
</p>
<p>truncatechars_html
upper
</p>
<hr>
<span id="upper"></span><div class="header">
<p>
Next: <a href="#urlencode" accesskey="n" rel="next">urlencode</a>, Previous: <a href="#truncatechars" accesskey="p" rel="prev">truncatechars</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="upper-1"></span><h4 class="subsection">8.2.32 upper</h4>
<span id="g_t_0023upper"></span><p>Converts a string into all uppercase.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|upper }}
</pre>
<p>If <code>value</code> is <code>&quot;Joel is a slug&quot;</code>, the output will be
<code>&quot;JOEL IS A SLUG&quot;</code>.
</p>
<p>urlencode
</p>
<hr>
<span id="urlencode"></span><div class="header">
<p>
Next: <a href="#escape" accesskey="n" rel="next">escape</a>, Previous: <a href="#upper" accesskey="p" rel="prev">upper</a>, Up: <a href="#List-of-filters" accesskey="u" rel="up">List of filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="urlencode-1"></span><h4 class="subsection">8.2.33 urlencode</h4>
<span id="g_t_0023urlencode"></span><p>Escapes a value for use in a URL.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ value|urlencode }}
</pre>
<p>If <code>value</code> is <code>&quot;http://www.example.org/foo?a=b&amp;c=d&quot;</code>, the
output will be <code>&quot;http%3A//www.example.org/foo%3Fa%3Db%26c%3Dd&quot;</code>.
</p>
<p>An optional argument containing the characters which should not be
escaped can be provided.
</p>
<p>If not provided, the &rsquo;/&rsquo; character is assumed safe. An empty string can
be provided when <em>all</em> characters should be escaped. For example:
</p>
<pre class="verbatim">{{ value|urlencode:&quot;&quot; }}
</pre>
<p>If <code>value</code> is <code>&quot;http://www.example.org/&quot;</code>, the output will be
<code>&quot;http%3A%2F%2Fwww.example.org%2F&quot;</code>.
</p>
<hr>
<span id="Custom-filters"></span><div class="header">
<p>
Previous: <a href="#List-of-filters" accesskey="p" rel="prev">List of filters</a>, Up: <a href="#Filters" accesskey="u" rel="up">Filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Custom-filters-1"></span><h3 class="section">8.3 Custom filters</h3>
<span id="g_t_0023custom_002dfilters"></span><p>Use the <code>def-filter</code> macro. Its general form is:
</p>
<pre class="verbatim">(def-filter :myfilter-name (value arg)
   (body))
</pre>
<p>It always takes the variable&rsquo;s value as argument, and it can have one
required or optional argument. For example, this is how those built-in
filters are defined:
</p>
<pre class="verbatim">(def-filter :capfirst (val)
  (string-capitalize (princ-to-string val)))
</pre>
<p>This is all there is to it. Once written, you can use it in your
templates. You can define a filter wherever you want and there is no
need to register it or to import it in your templates.
</p>
<p>Here&rsquo;s a filter with a required argument:
</p>
<pre class="verbatim">(def-filter :add (it n)
  (+ it (parse-integer n)))
</pre>
<p>and with an optional one:
</p>
<pre class="verbatim">(def-filter :datetime (it &amp;optional format)
  (let ((timestamp ))))
</pre>
<p>When you need to pass a second argument, make your filter return a
lambda function and chain it with the <code>with</code> filter:
</p>
<pre class="verbatim">(def-filter :replace (it regex)
   (lambda (replace)
     (ppcre:regex-replace-all regex it replace)))

(def-filter :with (it replace)
   (funcall it replace))
</pre>
<p>Now we can write:
</p>
<pre class="verbatim">{{ value | replace:foo | with:bar }}
</pre>
<p>Errors are handled by the macro, but you can handle them and return a
<code>template-error</code> condition:
</p>
<pre class="verbatim">(def-filter :handle-error-filter (it)
   (handler-case
         (do-something)
     (condition (e)
       (template-error &quot;There was an error executing this filter: ~A&quot; e))))
</pre>


<hr>
<span id="Template-inheritance"></span><div class="header">
<p>
Next: <a href="#Internationalization" accesskey="n" rel="next">Internationalization</a>, Previous: <a href="#Filters" accesskey="p" rel="prev">Filters</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Template-inheritance-1"></span><h2 class="chapter">9 Template inheritance</h2>
<span id="g_t_0023template_002dinheritance"></span><p>The most powerful &ndash; and thus the most complex &ndash; part of Djula&rsquo;s
template engine is template inheritance. Template inheritance allows you
to build a base &quot;skeleton&quot; template that contains all the common
elements of your site and defines <strong>blocks</strong> that child templates
can override.
</p>
<p>It&rsquo;s easiest to understand template inheritance by starting with an
example:
</p>
<pre class="verbatim">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot; /&gt;
    &lt;title&gt;{% block title %}My amazing site{% endblock %}&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;div id=&quot;sidebar&quot;&gt;
        {% block sidebar %}
        &lt;ul&gt;
            &lt;li&gt;&lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&quot;/blog/&quot;&gt;Blog&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
        {% endblock %}
    &lt;/div&gt;

    &lt;div id=&quot;content&quot;&gt;
        {% block content %}{% endblock %}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>This template, which we&rsquo;ll call <code>base.html</code>, defines a simple HTML
skeleton document that you might use for a simple two-column page. It&rsquo;s
the job of &quot;child&quot; templates to fill the empty blocks with content.
</p>
<p>In this example, the <code>block</code> tag defines three blocks that child
templates can fill in. All the <code>block</code> tag does is to tell the
template engine that a child template may override those portions of the
template.
</p>
<p>A child template might look like this:
</p>
<pre class="verbatim">{% extends &quot;base.html&quot; %}

{% block title %}My amazing blog{% endblock %}

{% block content %}
{% for entry in blog_entries %}
    &lt;h2&gt;{{ entry.title }}&lt;/h2&gt;
    &lt;p&gt;{{ entry.body }}&lt;/p&gt;
{% endfor %}
{% endblock %}
</pre>
<p>The <code>extends</code> tag is the key here. It tells the template engine
that this template &quot;extends&quot; another template. When the template system
evaluates this template, first it locates the parent &ndash; in this case,
&quot;base.html&quot;.
</p>
<p>At that point, the template engine will notice the three <code>block</code>
tags in <code>base.html</code> and replace those blocks with the contents of
the child template. Depending on the value of <code>blog_entries</code>, the
output might look like:
</p>
<pre class="verbatim">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot; /&gt;
    &lt;title&gt;My amazing blog&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;div id=&quot;sidebar&quot;&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&quot;/blog/&quot;&gt;Blog&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;

    &lt;div id=&quot;content&quot;&gt;
        &lt;h2&gt;Entry one&lt;/h2&gt;
        &lt;p&gt;This is my first entry.&lt;/p&gt;

        &lt;h2&gt;Entry two&lt;/h2&gt;
        &lt;p&gt;This is my second entry.&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>Note that since the child template didn&rsquo;t define the <code>sidebar</code>
block, the value from the parent template is used instead. Content
within a <code>{% block %}</code> tag in a parent template is always used as
a fallback.
</p>
<p>You can use as many levels of inheritance as needed. One common way of
using inheritance is the following three-level approach:
</p>
<ul>
<li> Create a <code>base.html</code> template that holds the main look-and-feel of
your site.
</li><li> Create a <code>base_SECTIONNAME.html</code> template for each &quot;section&quot; of
your site. For example, <code>base_news.html</code>, <code>base_sports.html</code>.
These templates all extend <code>base.html</code> and include section-specific
styles/design.
</li><li> Create individual templates for each type of page, such as a news
article or blog entry. These templates extend the appropriate section
template.
</li></ul>

<p>This approach maximizes code reuse and makes it easy to add items to
shared content areas, such as section-wide navigation.
</p>
<p>Here are some tips for working with inheritance:
</p>
<ul>
<li> If you use <code>{% extends %}&lt;extends&gt;</code> in a template, it must be the
first template tag in that template. Template inheritance won&rsquo;t work,
otherwise.
</li><li> More <code>{% block %}&lt;block&gt;</code> tags in your base templates are better.
Remember, child templates don&rsquo;t have to define all parent blocks, so you
can fill in reasonable defaults in a number of blocks, then only define
the ones you need later. It&rsquo;s better to have more hooks than fewer
hooks.
</li><li> If you find yourself duplicating content in a number of templates, it
probably means you should move that content to a <code>{% block %}</code> in
a parent template.
</li><li> If you need to get the content of the block from the parent template,
the <code>{{ block.super }}</code> variable will do the trick. This is
useful if you want to add to the contents of a parent block instead of
completely overriding it. Data inserted using
<code>{{ block.super }}</code> will not be automatically escaped (see the
next section), since it was already escaped, if necessary, in
the parent template.
</li><li> For extra readability, you can optionally give a <em>name</em> to your
<code>{% endblock %}</code> tag. For example:

<pre class="verbatim">{% block content %}
...
{% endblock content %}
</pre>
<p>In larger templates, this technique helps you see which
<code>{% block %}</code> tags are being closed.
</p>
</li></ul>

<p>Finally, note that you can&rsquo;t define multiple <code>block</code> tags with the
same name in the same template. This limitation exists because a block
tag works in &quot;both&quot; directions. That is, a block tag doesn&rsquo;t just
provide a hole to fill &ndash;it also defines the content that fills the hole
in the <em>parent</em>. If there were two similarly-named <code>block</code>
tags in a template, that template&rsquo;s parent wouldn&rsquo;t know which one of
the blocks&rsquo; content to use.
</p>


<hr>
<span id="Internationalization"></span><div class="header">
<p>
Next: <a href="#Error-handling" accesskey="n" rel="next">Error handling</a>, Previous: <a href="#Template-inheritance" accesskey="p" rel="prev">Template inheritance</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Internationalization-1"></span><h2 class="chapter">10 Internationalization</h2>
<span id="g_t_0023internationalization"></span>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Syntax" accesskey="1">Syntax</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Internationalization-tags" accesskey="2">Internationalization tags</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Internationalization-filters" accesskey="3">Internationalization filters</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Choosing-language" accesskey="4">Choosing language</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Backends" accesskey="5">Backends</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Syntax"></span><div class="header">
<p>
Next: <a href="#Internationalization-tags" accesskey="n" rel="next">Internationalization tags</a>, Up: <a href="#Internationalization" accesskey="u" rel="up">Internationalization</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Syntax-1"></span><h3 class="section">10.1 Syntax</h3>
<span id="g_t_0023syntax"></span><p>The easiest way to translate a string or variable is to enclose it
between <code>{_</code> and <code>_}</code>:
</p>
<pre class="verbatim">{_ var _}
{_ &quot;hello&quot; _}
</pre>
<hr>
<span id="Internationalization-tags"></span><div class="header">
<p>
Next: <a href="#Internationalization-filters" accesskey="n" rel="next">Internationalization filters</a>, Previous: <a href="#Syntax" accesskey="p" rel="prev">Syntax</a>, Up: <a href="#Internationalization" accesskey="u" rel="up">Internationalization</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Internationalization-tags-1"></span><h3 class="section">10.2 Internationalization tags</h3>
<span id="g_t_0023tags_002d1"></span><p>trans
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#trans" accesskey="1">trans</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Internationalization-filters"></span><div class="header">
<p>
Next: <a href="#Choosing-language" accesskey="n" rel="next">Choosing language</a>, Previous: <a href="#Internationalization-tags" accesskey="p" rel="prev">Internationalization tags</a>, Up: <a href="#Internationalization" accesskey="u" rel="up">Internationalization</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Internationalization-filters-1"></span><h3 class="section">10.3 Internationalization filters</h3>
<span id="g_t_0023filters_002d1"></span><p>urlencode
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#trans" accesskey="1">trans</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="trans"></span><div class="header">
<p>
Up: <a href="#Internationalization-filters" accesskey="u" rel="up">Internationalization filters</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="trans-1"></span><h4 class="subsection">10.3.1 trans</h4>
<span id="g_t_0023trans_002d1"></span><p>Translates a variable or string.
</p>
<p>For example:
</p>
<pre class="verbatim">{{ var | trans }}
{{ &quot;my string&quot; |  trans }}
</pre>
<hr>
<span id="Choosing-language"></span><div class="header">
<p>
Next: <a href="#Backends" accesskey="n" rel="next">Backends</a>, Previous: <a href="#Internationalization-filters" accesskey="p" rel="prev">Internationalization filters</a>, Up: <a href="#Internationalization" accesskey="u" rel="up">Internationalization</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Choosing-language-1"></span><h3 class="section">10.4 Choosing language</h3>
<span id="g_t_0023choosing_002dlanguage"></span><p>To choose the language to use, set the :cl<code>*CURRENT-LANGUAGE*</code>
variable.
</p>
<p>For example:
</p>
<pre class="verbatim">(let ((djula:*current-language* :es))
   (djula:render-template* +translation.html+))
</pre>
<hr>
<span id="Backends"></span><div class="header">
<p>
Previous: <a href="#Choosing-language" accesskey="p" rel="prev">Choosing language</a>, Up: <a href="#Internationalization" accesskey="u" rel="up">Internationalization</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Backends-1"></span><h3 class="section">10.5 Backends</h3>
<span id="g_t_0023backends"></span><p>Djula supports two backends for doing translations:
<a href="https://github.com/arielnetworks/cl-locale">cl-locale</a> and
<a href="https://github.com/copyleft/gettext">gettext</a>
</p>
<p>Please have a look at the demo and the documentation of those packages
to figure out how to use them.
</p>
<hr>
<span id="Error-handling"></span><div class="header">
<p>
Next: <a href="#Automatic-HTML-escaping" accesskey="n" rel="next">Automatic HTML escaping</a>, Previous: <a href="#Internationalization" accesskey="p" rel="prev">Internationalization</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Error-handling-1"></span><h2 class="chapter">11 Error handling</h2>
<span id="g_t_0023error_002dhandling"></span><p>Djula catches errors and barfs them to the template output by default.
</p>
<p>That is controlled via the :cl<code>*CATCH-TEMPLATE-ERRORS-P*</code>. If
changed to <code>NIL</code>, then errors are not caught anymore and are
debuggable from the lisp listener.
</p>
<p>Djula provides more or less verbosity in template errors. Verbosity is
controlled via the variable :cl<code>*VERBOSE-ERRORS-P*</code>.
</p>
<p>Also, there&rsquo;s a fancy page to display errors, which can be disabled if
desired. That is controlled via the variable
:cl<code>*FANCY-ERROR-TEMPLATE-P*</code>
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Djula-API" accesskey="1">Djula API</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Djula-API"></span><div class="header">
<p>
Up: <a href="#Error-handling" accesskey="u" rel="up">Error handling</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Djula-API-1"></span><h3 class="section">11.1 Djula API</h3>
<span id="g_t_0023api_002d2"></span><p>Djula external symbols documentation
</p>


<hr>
<span id="Automatic-HTML-escaping"></span><div class="header">
<p>
Next: <a href="#Custom-tag-and-filter-libraries" accesskey="n" rel="next">Custom tag and filter libraries</a>, Previous: <a href="#Error-handling" accesskey="p" rel="prev">Error handling</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Automatic-HTML-escaping-1"></span><h2 class="chapter">12 Automatic HTML escaping</h2>
<span id="g_t_0023automatic_002dhtml_002descaping"></span><p>When generating HTML from templates, there&rsquo;s always a risk that a
variable will include characters that affect the resulting HTML. For
example, consider this template fragment:
</p>
<pre class="verbatim">Hello, {{ name }}.
</pre>
<p>At first, this seems like a harmless way to display a user&rsquo;s name, but
consider what would happen if the user entered their name as this:
</p>
<pre class="verbatim">&lt;script&gt;alert('hello')&lt;/script&gt;
</pre>
<p>With this name value, the template would be rendered as:
</p>
<pre class="verbatim">Hello, &lt;script&gt;alert('hello')&lt;/script&gt;
</pre>
<p>...which means the browser would pop-up a JavaScript alert box!
</p>
<p>Similarly, what if the name contained a <code>'&lt;'</code> symbol, like this?
</p>
<pre class="verbatim">&lt;b&gt;username
</pre>
<p>That would result in a rendered template like this:
</p>
<pre class="verbatim">Hello, &lt;b&gt;username
</pre>
<p>...which, in turn, would result in the remainder of the Web page being
bolded!
</p>
<p>Clearly, user-submitted data shouldn&rsquo;t be trusted blindly and inserted
directly into your Web pages, because a malicious user could use this
kind of hole to do potentially bad things. This type of security exploit
is called a
<a href="http://en.wikipedia.org/wiki/Cross-site_scripting">Cross Site
Scripting</a> (XSS) attack.
</p>
<p>To avoid this problem, you have two options:
</p>
<ul>
<li> One, you can make sure to run each untrusted variable through the
<code>escape</code> filter (documented below), which converts potentially
harmful HTML characters to unharmful ones. This was the default solution
in Django for its first few years, but the problem is that it puts the
onus on <em>you</em>, the developer / template author, to ensure you&rsquo;re
escaping everything. It&rsquo;s easy to forget to escape data.
</li><li> Two, you can take advantage of Django&rsquo;s automatic HTML escaping. The
remainder of this section describes how auto-escaping works.
</li></ul>

<p>By default in Django, every template automatically escapes the output of
every variable tag. Specifically, these five characters are escaped:
</p>
<ul>
<li> <code>&lt;</code> is converted to <code>&amp;lt;</code>
</li><li> <code>&gt;</code> is converted to <code>&amp;gt;</code>
</li><li> <code>'</code> (single quote) is converted to <code>&amp;#39;</code>
</li><li> <code>&quot;</code> (double quote) is converted to <code>&amp;quot;</code>
</li><li> <code>&amp;</code> is converted to <code>&amp;amp;</code>
</li></ul>

<p>Again, we stress that this behavior is on by default. If you&rsquo;re using
Django&rsquo;s template system, you&rsquo;re protected.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#How-to-turn-it-off" accesskey="1">How to turn it off</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Notes" accesskey="2">Notes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#String-literals-and-automatic-escaping" accesskey="3">String literals and automatic escaping</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="How-to-turn-it-off"></span><div class="header">
<p>
Next: <a href="#Notes" accesskey="n" rel="next">Notes</a>, Up: <a href="#Automatic-HTML-escaping" accesskey="u" rel="up">Automatic HTML escaping</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="How-to-turn-it-off-1"></span><h3 class="section">12.1 How to turn it off</h3>
<span id="g_t_0023how_002dto_002dturn_002dit_002doff"></span><p>If you don&rsquo;t want data to be auto-escaped, on a per-site, per-template
level or per-variable level, you can turn it off in several ways.
</p>
<p>Why would you want to turn it off? Because sometimes, template variables
contain data that you <em>intend</em> to be rendered as raw HTML, in which
case you don&rsquo;t want their contents to be escaped. For example, you might
store a blob of HTML in your database and want to embed that directly
into your template. Or, you might be using Django&rsquo;s template system to
produce text that is <em>not</em> HTML &ndash; like an email message, for
instance.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#For-individual-variables" accesskey="1">For individual variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="For-individual-variables"></span><div class="header">
<p>
Up: <a href="#How-to-turn-it-off" accesskey="u" rel="up">How to turn it off</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="For-individual-variables-1"></span><h4 class="subsection">12.1.1 For individual variables</h4>
<span id="g_t_0023for_002dindividual_002dvariables"></span><p>To disable auto-escaping for an individual variable, use the <code>safe</code>
filter:
</p>
<pre class="verbatim">This will be escaped: {{ data }}
This will not be escaped: {{ data|safe }}
</pre>
<p>Think of <em>safe</em> as shorthand for <em>safe from further escaping</em>
or <em>can be safely interpreted as HTML</em>. In this example, if
<code>data</code> contains <code>'&lt;b&gt;'</code>, the output will be:
</p>
<pre class="verbatim">This will be escaped: &amp;lt;b&amp;gt;
This will not be escaped: &lt;b&gt;
</pre>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#For-template-blocks" accesskey="1">For template blocks</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="For-template-blocks"></span><div class="header">
<p>
Up: <a href="#For-individual-variables" accesskey="u" rel="up">For individual variables</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="For-template-blocks-1"></span><h4 class="subsubsection">12.1.1.1 For template blocks</h4>
<span id="g_t_0023for_002dtemplate_002dblocks"></span><p>To control auto-escaping for a template, wrap the template (or just a
particular section of the template) in the <code>autoescape</code> tag, like
so:
</p>
<pre class="verbatim">{% autoescape off %}
    Hello {{ name }}
{% endautoescape %}
</pre>
<p>The <code>autoescape</code> tag takes either <code>on</code> or <code>off</code> as its
argument. At times, you might want to force auto-escaping when it would
otherwise be disabled. Here is an example template:
</p>
<pre class="verbatim">Auto-escaping is on by default. Hello {{ name }}

{% autoescape off %}
    This will not be auto-escaped: {{ data }}.

    Nor this: {{ other_data }}
    {% autoescape on %}
        Auto-escaping applies again: {{ name }}
    {% endautoescape %}
{% endautoescape %}
</pre>
<p>The auto-escaping tag passes its effect onto templates that extend the
current one as well as templates included via the <code>include</code> tag,
just like all block tags. For example:
</p>
<pre class="verbatim"># base.html

{% autoescape off %}
&lt;h1&gt;{% block title %}{% endblock %}&lt;/h1&gt;
{% block content %}
{% endblock %}
{% endautoescape %}


# child.html

{% extends &quot;base.html&quot; %}
{% block title %}This &amp; that{% endblock %}
{% block content %}{{ greeting }}{% endblock %}
</pre>
<p>Because auto-escaping is turned off in the base template, it will also
be turned off in the child template, resulting in the following rendered
HTML when the <code>greeting</code> variable contains the string
<code>&lt;b&gt;Hello!&lt;/b&gt;</code>:
</p>
<pre class="verbatim">&lt;h1&gt;This &amp; that&lt;/h1&gt;
&lt;b&gt;Hello!&lt;/b&gt;
</pre>
<hr>
<span id="Notes"></span><div class="header">
<p>
Next: <a href="#String-literals-and-automatic-escaping" accesskey="n" rel="next">String literals and automatic escaping</a>, Previous: <a href="#How-to-turn-it-off" accesskey="p" rel="prev">How to turn it off</a>, Up: <a href="#Automatic-HTML-escaping" accesskey="u" rel="up">Automatic HTML escaping</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Notes-1"></span><h3 class="section">12.2 Notes</h3>
<span id="g_t_0023notes"></span><p>Generally, template authors don&rsquo;t need to worry about auto-escaping very
much. Developers on the Python side (people writing views and custom
filters) need to think about the cases in which data shouldn&rsquo;t be
escaped, and mark data appropriately, so things Just Work in the
template.
</p>
<p>If you&rsquo;re creating a template that might be used in situations where
you&rsquo;re not sure whether auto-escaping is enabled, then add an
<code>escape</code> filter to any variable that needs escaping. When
auto-escaping is on, there&rsquo;s no danger of the <code>escape</code> filter
<em>double-escaping</em> data &ndash; the <code>escape</code> filter does not affect
auto-escaped variables.
</p>
<hr>
<span id="String-literals-and-automatic-escaping"></span><div class="header">
<p>
Previous: <a href="#Notes" accesskey="p" rel="prev">Notes</a>, Up: <a href="#Automatic-HTML-escaping" accesskey="u" rel="up">Automatic HTML escaping</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="String-literals-and-automatic-escaping-1"></span><h3 class="section">12.3 String literals and automatic escaping</h3>
<span id="g_t_0023string_002dliterals_002dand_002dautomatic_002descaping"></span><p>As we mentioned earlier, filter arguments can be strings:
</p>
<pre class="verbatim">{{ data|default:&quot;This is a string literal.&quot; }}
</pre>
<p>All string literals are inserted <strong>without</strong> any automatic escaping
into the template &ndash; they act as if they were all passed through the
<code>safe</code> filter. The reasoning behind this is that the template
author is in control of what goes into the string literal, so they can
make sure the text is correctly escaped when the template is written.
</p>
<p>This means you would write :
</p>
<pre class="verbatim">{{ data|default:&quot;3 &amp;lt; 2&quot; }}
</pre>
<p>...rather than :
</p>
<pre class="verbatim">{{ data|default:&quot;3 &lt; 2&quot; }}  &lt;-- Bad! Don't do this.
</pre>
<p>This doesn&rsquo;t affect what happens to data coming from the variable
itself. The variable&rsquo;s contents are still automatically escaped, if
necessary, because they&rsquo;re beyond the control of the template author.
</p>


<hr>
<span id="Custom-tag-and-filter-libraries"></span><div class="header">
<p>
Next: <a href="#Variable-Index" accesskey="n" rel="next">Variable Index</a>, Previous: <a href="#Automatic-HTML-escaping" accesskey="p" rel="prev">Automatic HTML escaping</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Custom-tag-and-filter-libraries-1"></span><h2 class="chapter">13 Custom tag and filter libraries</h2>
<span id="g_t_0023custom_002dtag_002dand_002dfilter_002dlibraries"></span><p>Certain applications provide custom tag and filter libraries. To access
them in a template, use the <code>load</code> tag:
</p>
<pre class="verbatim">{% load comments %}

{% comment_form for blogs.entries entry.id with is_public yes %}
</pre>
<p>In the above, the <code>load</code> tag loads the <code>comments</code> tag library,
which then makes the <code>comment_form</code> tag available for use. Consult
the documentation area in your admin to find the list of custom
libraries in your installation.
</p>
<p>The <code>load</code> tag can take multiple library names, separated by
spaces. Example:
</p>
<pre class="verbatim">{% load comments i18n %}
</pre>
<p>See <code>/howto/custom-template-tags</code> for information on writing your
own custom template libraries.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Custom-libraries-and-template-inheritance" accesskey="1">Custom libraries and template inheritance</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Custom-libraries-and-template-inheritance"></span><div class="header">
<p>
Up: <a href="#Custom-tag-and-filter-libraries" accesskey="u" rel="up">Custom tag and filter libraries</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Custom-libraries-and-template-inheritance-1"></span><h3 class="section">13.1 Custom libraries and template inheritance</h3>
<span id="g_t_0023custom_002dlibraries_002dand_002dtemplate_002dinheritance"></span><p>When you load a custom tag or filter library, the tags/filters are only
made available to the current template &ndash; not any parent or child
templates along the template-inheritance path.
</p>
<p>For example, if a template <code>foo.html</code> has
<code>{% load comments %}</code>, a child template (e.g., one that has
<code>{% extends &quot;foo.html&quot; %}</code>) will <em>not</em> have access to the
comments template tags and filters. The child template is responsible
for its own <code>{% load comments %}</code>.
</p>
<p>This is a feature for the sake of maintainability and sanity.
</p>


<hr>
<span id="Variable-Index"></span><div class="header">
<p>
Next: <a href="#Function-Index" accesskey="n" rel="next">Function Index</a>, Previous: <a href="#Custom-tag-and-filter-libraries" accesskey="p" rel="prev">Custom tag and filter libraries</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Variable-Index-1"></span><h2 class="unnumbered">Variable Index</h2>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Variable-Index_vr_letter-D"><b>D</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-vr" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Variable-Index_vr_letter-D">D</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-djula_003a_002acurrent_002dstore_002a"><code>djula:*current-store*</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Usage">Usage</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Variable-Index_vr_letter-D"><b>D</b></a>
 &nbsp; 
</td></tr></table>

<hr>
<span id="Function-Index"></span><div class="header">
<p>
Next: <a href="#Concept-Index" accesskey="n" rel="next">Concept Index</a>, Previous: <a href="#Variable-Index" accesskey="p" rel="prev">Variable Index</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Function-Index-1"></span><h2 class="unnumbered">Function Index</h2>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Function-Index_fn_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Function-Index_fn_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Function-Index_fn_letter-F"><b>F</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-fn" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Function-Index_fn_letter-A">A</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-alexandria_003aflatten"><code>alexandria:flatten</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Introduction">Introduction</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Function-Index_fn_letter-D">D</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-djula_003aadd_002dtemplate_002ddirectory"><code>djula:add-template-directory</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Usage">Usage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-djula_003acompile_002dtemplate_002a"><code>djula:compile-template*</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Usage">Usage</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Function-Index_fn_letter-F">F</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-flatten"><code>flatten</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Introduction">Introduction</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Function-Index_fn_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Function-Index_fn_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Function-Index_fn_letter-F"><b>F</b></a>
 &nbsp; 
</td></tr></table>

<hr>
<span id="Concept-Index"></span><div class="header">
<p>
Previous: <a href="#Function-Index" accesskey="p" rel="prev">Function Index</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Concept-Index-1"></span><h2 class="unnumbered">Concept Index</h2>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Concept-Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-cp" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Concept-Index_cp_letter-D">D</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-djula">djula</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Top">Top</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Concept-Index_cp_letter-F">F</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-foo">foo</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Introduction">Introduction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-foo-1">foo</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Basics">Basics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-foo-2">foo</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables">Variables</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Concept-Index_cp_letter-V">V</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-variables">variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables">Variables</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Concept-Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
</td></tr></table>
<hr>



</body>
</html>
